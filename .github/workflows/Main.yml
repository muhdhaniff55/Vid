name: Re-encode Video

on:
  workflow_dispatch:

jobs:
  reencode:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Install FFmpeg
        run: sudo apt-get install -y ffmpeg

      - name: Download Video
        run: |
          VIDEO_URL="https://drive.usercontent.google.com/download?id=1--WM8ELgK7hb4aWUyFpYbQHslPw1eE_r&export=download&confirm=t&uuid=ba6bb6b7-50e8-4c2f-b593-6482d899d2f9"  # Replace with your video link
          curl -L -o input.mp4 $VIDEO_URL

      - name: Re-encode video
        run: ffmpeg -movflags faststart -i input.mp4 -c:v libx264 -preset medium -crf 23 -c:a copy -r 60 output.mp4

      - name: Upload re-encoded video
        uses: actions/upload-artifact@v4
        with:
          name: reencoded-video
          path: output.mp4
